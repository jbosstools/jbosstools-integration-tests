<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.jboss.tools.integration-tests</groupId>
		<artifactId>tests</artifactId>
		<version>4.3.0-SNAPSHOT</version>
	</parent>
	<groupId>org.jboss.tools.as.tests</groupId>
	<artifactId>org.jboss.ide.eclipse.as.ui.bot.test</artifactId>
	<packaging>eclipse-test-plugin</packaging>

	<!-- In order to run the tests you need to configure these properties (some of them have default values set
		test.profile - which profile will be used. Default - all project tests will run
		reddeer.config - which configuration file will be used. Default - all projects config files directory
		download-properties-file - which property file with download URLs will be used. Default - project properties
		test.class - which test suite 
	 -->
	<properties>
		<!-- Maven configuration -->
		<maven.test.failure.ignore>true</maven.test.failure.ignore>
		<!-- Red deer configuration -->
		<logDebug>false</logDebug>
		<!-- Requirements and server configuration -->
		<requirementsDirectory>${project.build.directory}/requirements</requirementsDirectory>
		<reddeer.project.config>${project.build.outputDirectory}/project</reddeer.project.config>
		<reddeer.product.config>${project.build.outputDirectory}/product</reddeer.product.config>
		<reddeer.config>${reddeer.project.config}</reddeer.config>
		<jbosstools.test.jboss-as-3.2.home>${requirementsDirectory}/jboss-3.2.8.SP1</jbosstools.test.jboss-as-3.2.home>
		<jbosstools.test.jboss-as-4.0.home>${requirementsDirectory}/jboss-4.0.5.GA</jbosstools.test.jboss-as-4.0.home>
		<jbosstools.test.jboss-as-4.2.home>${requirementsDirectory}/jboss-4.2.3.GA</jbosstools.test.jboss-as-4.2.home>
		<jbosstools.test.jboss-as-5.0.home>${requirementsDirectory}/jboss-5.0.1.GA</jbosstools.test.jboss-as-5.0.home>
		<jbosstools.test.jboss-as-5.1.home>${requirementsDirectory}/jboss-5.1.0.GA</jbosstools.test.jboss-as-5.1.home>
		<jbosstools.test.jboss-as-6.x.home>${requirementsDirectory}/jboss-6.1.0.Final</jbosstools.test.jboss-as-6.x.home>
		<jbosstools.test.jboss-as-7.0.home>${requirementsDirectory}/jboss-as-7.0.2.Final</jbosstools.test.jboss-as-7.0.home>
		<jbosstools.test.jboss-as-7.1.home>${requirementsDirectory}/jboss-as-7.1.1.Final</jbosstools.test.jboss-as-7.1.home>
		<jbosstools.test.jboss-wildfly-8.home>${requirementsDirectory}/wildfly-8.0.0.Final</jbosstools.test.jboss-wildfly-8.home>
		<jbosstools.test.jboss-eap-4.home>${requirementsDirectory}/jboss-eap-4.3/jboss-as</jbosstools.test.jboss-eap-4.home>
		<jbosstools.test.jboss-eap-5.home>${requirementsDirectory}/jboss-eap-5.2/jboss-as</jbosstools.test.jboss-eap-5.home>
		<jbosstools.test.jboss-eap-6.0.home>${requirementsDirectory}/jboss-eap-6.0</jbosstools.test.jboss-eap-6.0.home>
		<jbosstools.test.jboss-eap-6.x.home>${requirementsDirectory}/jboss-eap-6.3</jbosstools.test.jboss-eap-6.x.home>
		<!-- Server download URL property files configuration -->
		<project-download-properties-file>${project.basedir}/properties/projects-download.properties</project-download-properties-file>
		<product-download-properties-file>${project.basedir}/properties/products-download.properties</product-download-properties-file>
		<download-properties-file>${project-download-properties-file}</download-properties-file>
		<!-- Command line arguments for tycho surefire tests -->
		<runtimesProperties>-Dreddeer.config=${reddeer.config} -DlogDebug=${logDebug} -Djbosstools.test.jboss-as-3.2.home=${jbosstools.test.jboss-as-3.2.home} -Djbosstools.test.jboss-as-4.0.home=${jbosstools.test.jboss-as-4.0.home} -Djbosstools.test.jboss-as-4.2.home=${jbosstools.test.jboss-as-4.2.home} -Djbosstools.test.jboss-as-5.0.home=${jbosstools.test.jboss-as-5.0.home} -Djbosstools.test.jboss-as-5.1.home=${jbosstools.test.jboss-as-5.1.home} -Djbosstools.test.jboss-as-6.x.home=${jbosstools.test.jboss-as-6.x.home} -Djbosstools.test.jboss-as-7.0.home=${jbosstools.test.jboss-as-7.0.home} -Djbosstools.test.jboss-as-7.1.home=${jbosstools.test.jboss-as-7.1.home} -Djbosstools.test.jboss-wildfly-8.home=${jbosstools.test.jboss-wildfly-8.home} -Djbosstools.test.jboss-eap-4.home=${jbosstools.test.jboss-eap-4.home} -Djbosstools.test.jboss-eap-5.home=${jbosstools.test.jboss-eap-5.home} -Djbosstools.test.jboss-eap-6.0.home=${jbosstools.test.jboss-eap-6.0.home} -Djbosstools.test.jboss-eap-6.x.home=${jbosstools.test.jboss-eap-6.x.home}</runtimesProperties>
		<systemProperties>${integrationTestsSystemProperties} ${runtimesProperties}</systemProperties>
	</properties>

	<build>
		<resources>
			<resource>
				<directory>resources/config_files_templates</directory>
				<includes>
					<include>project/*</include>
					<include>product/*</include>
				</includes>
				<filtering>true</filtering>
			</resource>
		</resources>
		<plugins>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>properties-maven-plugin</artifactId>
				<version>1.0-alpha-2</version>
				<executions>
					<execution>
						<phase>initialize</phase>
						<goals>
							<goal>read-project-properties</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<files>
						<file>${download-properties-file}</file>
					</files>
				</configuration>
			</plugin>
								
			<plugin>
				<groupId>com.googlecode.maven-download-plugin</groupId>
				<artifactId>download-maven-plugin</artifactId>
				<configuration>
					<outputDirectory>${requirementsDirectory}</outputDirectory>
				</configuration>
			</plugin>

			<plugin>
				<groupId>org.eclipse.tycho</groupId>
				<artifactId>tycho-surefire-plugin</artifactId>
				<configuration>
					<useUIThread>false</useUIThread>
					<surefire.timeout>7200</surefire.timeout>
					<forkedProcessTimeoutInSeconds>7200</forkedProcessTimeoutInSeconds>
					<testSuite>org.jboss.ide.eclipse.as.ui.bot.test</testSuite>
					<testClass>${test.class}</testClass>
					<explodedBundles>
						<bundle>org.mozilla.xulrunner.cocoa.macosx</bundle>
						<bundle>org.mozilla.xulrunner.gtk.linux.x86</bundle>
						<bundle>org.mozilla.xulrunner.gtk.linux.x86_64</bundle>
						<bundle>org.mozilla.xulrunner.win32.win32.x86</bundle>
					</explodedBundles>
					<dependencies combine.children="append">
						<dependency>
							<type>p2-installable-unit</type>
							<artifactId>org.jboss.ide.eclipse.as.feature.feature.group</artifactId>
							<version>0.0.0</version>
						</dependency>
						<dependency>
							<type>p2-installable-unit</type>
							<artifactId>org.jboss.tools.xulrunner.feature.feature.group</artifactId>
							<version>0.0.0</version>
						</dependency>
						<!-- This entry should enable creating of default JDK on Mac -->
						<dependency>
							<type>p2-installable-unit</type>
							<artifactId>org.eclipse.jdt.feature.group</artifactId>
							<version>0.0.0</version>
						</dependency>
					</dependencies>
				</configuration>
			</plugin>
		</plugins>
	</build>

	<profiles>
		<profile>
			<id>projects</id>
			<activation>
				<property>
					<name>!test.profile</name>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.ProjectsTestsSuite</test.class>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-as-3.2.8</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-3.2.url}</url>
									<outputFileName>jboss-3.2.8.SP1.zip</outputFileName>
									<md5>${jbosstools.test.jboss-as-3.2.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-4.0.5</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-4.0.url}</url>
									<outputFileName>jboss-4.0.5.GA.zip</outputFileName>
									<md5>${jbosstools.test.jboss-as-4.0.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-4.2.3</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-4.2.url}</url>
									<outputFileName>jboss-4.2.3.GA-jdk6.zip</outputFileName>
									<md5>${jbosstools.test.jboss-as-4.2.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-5.0.1</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-5.0.url}</url>
									<outputFileName>jboss-5.0.1.GA-jdk6.zip</outputFileName>
									<md5>${jbosstools.test.jboss-as-5.0.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-5.1.0</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-5.1.url}</url>
									<outputFileName>jboss-5.1.0.GA-jdk6.zip</outputFileName>
									<md5>${jbosstools.test.jboss-as-5.1.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-6.1.0</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-6.1.url}</url>
									<md5>${jbosstools.test.jboss-as-6.1.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-7.0.2</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-7.0.url}</url>
									<md5>${jbosstools.test.jboss-as-7.0.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-7.1.1</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-7.1.url}</url>
									<md5>${jbosstools.test.jboss-as-7.1.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-wildfly-8</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.wildfly-8.0.url}</url>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>projects-stable</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>projects-stable</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.StableTestsSuite</test.class>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-as-6.1.0</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-6.1.url}</url>
									<md5>${jbosstools.test.jboss-as-6.1.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-7.0.2</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-7.0.url}</url>
									<md5>${jbosstools.test.jboss-as-7.0.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-as-7.1.1</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-as-7.1.url}</url>
									<md5>${jbosstools.test.jboss-as-7.1.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-wildfly-8</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.wildfly-8.0.url}</url>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<id>products</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>products</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.ProductsTestsSuite</test.class>
				<reddeer.config>${reddeer.product.config}</reddeer.config>
				<download-properties-file>${product-download-properties-file}</download-properties-file>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-eap-4</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-4.3.url}</url>
									<md5>${jbosstools.test.jboss-eap-4.3.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-eap-5</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-5.2.url}</url>
									<md5>${jbosstools.test.jboss-eap-5.2.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-eap-6.0</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-6.0.url}</url>
									<md5>${jbosstools.test.jboss-eap-6.0.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
							<execution>
								<id>install-eap-6.x</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-6.3.url}</url>
									<md5>${jbosstools.test.jboss-eap-6.3.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>eap5</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>eap5</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.EAP5CompatibilitySuite</test.class>
				<reddeer.config>${reddeer.product.config}/eap-5.x.xml</reddeer.config>
				<download-properties-file>${product-download-properties-file}</download-properties-file>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-eap-5</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-5.2.url}</url>
									<md5>${jbosstools.test.jboss-eap-5.2.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>eap60</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>eap60</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.EAP60CompatibilitySuite</test.class>
				<reddeer.config>${reddeer.product.config}/eap-6.0.xml</reddeer.config>
				<download-properties-file>${product-download-properties-file}</download-properties-file>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-eap-6.0</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-6.0.url}</url>
									<md5>${jbosstools.test.jboss-eap-6.0.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>eap6x</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>eap6x</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.EAP6xCompatibilitySuite</test.class>
				<reddeer.config>${reddeer.product.config}/eap-6.x.xml</reddeer.config>
				<download-properties-file>${product-download-properties-file}</download-properties-file>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-eap-6.x</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.jboss-eap-6.3.url}</url>
									<md5>${jbosstools.test.jboss-eap-6.3.md5}</md5>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>wildfly8</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>wildfly8</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.Wildfly8CompatibilitySuite</test.class>
				<reddeer.config>${reddeer.project.config}/wildfly-8.xml</reddeer.config>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-wildfly-8</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.wildfly-8.0.url}</url>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>

		<profile>
			<!-- profile for setting all necessary properties from outside -->
			<id>custom</id>
			<activation>
				<property>
					<name>test.profile</name>
					<value>custom</value>
				</property>
			</activation>
			<properties>
				<test.class>org.jboss.ide.eclipse.as.ui.bot.test.AllTestsSuite</test.class>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>com.googlecode.maven-download-plugin</groupId>
						<artifactId>download-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>install-custom-server</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>wget</goal>
								</goals>
								<configuration>
									<url>${jbosstools.test.custom.url}</url>
									<unpack>true</unpack>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>osx</id>
			<activation>
				<property>
					<name>java.vendor.url</name>
					<value>http://www.apple.com/</value>
				</property>
			</activation>
			<properties>
				<!-- THE FOLLOWING LINE MUST NOT BE BROKEN BY AUTOFORMATTING -->
				<platformSystemProperties> -d32 -Dosgi.arch=x86 -XstartOnFirstThread</platformSystemProperties>
			</properties>
		</profile>
	</profiles>
</project>
